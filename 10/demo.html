<!DOCTYPE html>
<html lang="Zh-cn">
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1"/>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/>
	<meta name="description" content=""/>
	<meta name="Keywords" content=""/>
	<meta name="renderer" content="webkit"/>
	<title>微信JSSDK测试</title>
	<style type="text/css">
		body{
			font-family: 'microsoft yahei';
			font-size: 14px;
			color: #333;
			background-color: #fff;
		}
		.container{
			width: 6.4rem;
			margin: 0px auto;
		}
	</style>
	<script type="text/javascript">
		(function(){
			var doc = document.documentElement || document.body;
			var _width = doc.offsetWidth;
			_width = _width>640?640 : _width;
			doc.style.fontSize = _width/6.4  + 'px';
		})();
	</script>
</head>
<body>
<div class="container"></div>
<!--首先引入JSSDK-->
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<!--我们这里用jquery发起ajax请求，所以引入jquery-->
<script type="text/javascript" src="../app/js/jquery.min.js"></script>
<script type="text/javascript">
	$(function(){
			$.post('./get_jsapi_sign.php',{
				share_url:window.location.href
			},function(data){
				if(data.code == 0){
					//生成签名成功
					configWxAPI(data.data);
				}else{
					//生成签名失败
					alert('有错，请稍后尝试');
				};
			});
	});
	//配置权限
	function configWxAPI(conf){
		wx.config({
			debug:false,//开启调试模式，调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端
			            //打开，参数信息会通过log打出，仅在pc端时才会打印
			appId: conf.appId,//必填，公众号的唯一标识
			timestamp:conf.timestamp,//必填，生成签名的时间戳
			nonceStr:conf.nonceStr,//必填，生成签名的随机串
			signature:conf.signature,//必填，签名
			jsApiList:[
				'checkJsApi',
		        'onMenuShareTimeline',
		        'onMenuShareAppMessage',
		        'onMenuShareQQ',
		        'onMenuShareWeibo',
		        'hideMenuItems',
		        'showMenuItems',
		        'hideAllNonBaseMenuItem',
		        'showAllNonBaseMenuItem',
		        'onRecordEnd',
		        'openLocation',
		        'getLocation',
		        'hideOptionMenu',
		        'showOptionMenu',
		        'chooseImage',
		        'uploadImage',
		        'previewImage',
		        'closeWindow',
		        'scanQRCode',
		        'chooseWXPay'
			]//必填，需要使用的JS接口列表，也就是配置你想使用的调用接口
		});
	};
</script>
</body>
</html>